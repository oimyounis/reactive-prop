var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)},ReactiveProp=function(){function e(t,i,n,r,s){void 0===s&&(s=""),this._element=null,this._definitionName="",this._prop="",this._reactiveName="",this._value="",this._bound=[],this._origin=null,this._element=t,this._definitionName=i,this._prop=n,this._reactiveName=r,this.setValue(s),void 0===e._DEFINED[r]?e._DEFINED[r]=this:this._origin=e._DEFINED[r],e._DEFINED[r].bind(this)}return e.update=function(){for(var t in e._DEFINED){e._DEFINED[t]._updateBound()}},e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){"r-reactive"!==this._definitionName&&null!==e&&(this._value=e,this._origin&&this._origin.setValue(this._value),this._reflect())},e.prototype._reflect=function(){this._isDirective()?this._handleDirective():void 0===this._element._element[this._prop]?this._element._element.setAttribute(this._prop,this._value):this._element._element[this._prop]=this._value},e.prototype._isDirective=function(){return-1!==e._DIRECTIVES.indexOf(this._prop)},e.prototype._handleDirective=function(){"html"===this._prop?this._element._element.innerHTML=this._value:"text"===this._prop?this._element._element.innerText=this._value:"visible"===this._prop&&(1==this._value?this._element._element.style.display="":0==this._value&&(this._element._element.style.display="none"))},e.prototype._updateValue=function(){var e=this._element.attrib(this._prop),t=e!=this._value;return this.setValue(e),t},e.prototype.bind=function(e){this._bound.push(e)},e.prototype._updateBound=function(){for(var e=0,t=this._bound;e<t.length;e++){t[e].setValue(this._element.attrib(this._prop))}},e._DEFINED={},e._DIRECTIVES=["html","text","visible"],e}(),ReactiveElement=function(){function e(e){this._element=null,this._propList={};var t=null;if("string"==typeof e){if(null===(t=document.querySelector(e)))throw'Element with selector "'+e+'" does not exist'}else t=e;this._element=t,this._mapProps(),this._initEvents()}return e.prototype._mapProps=function(){var e=__assign({},this._element.attributes);e.length=Object.keys(e).length;for(var t=0,i=e;t<i.length;t++){var n=i[t],r=n.name,s=n.value;if(0==r.indexOf("r-")){var o=r.substr(2),a=this._element.getAttribute(o);null===a&&(a="");var _=new ReactiveProp(this,r,o,s,a);void 0===this._propList[s]&&(this._propList[s]=[]),this._propList[s].push(_),this._defineReactiveProp(s),this._element.attributes.removeNamedItem(r)}}},e.prototype._defineReactiveProp=function(e){Object.defineProperty(this,e,{get:function(){var t=ReactiveProp._DEFINED[e];if(null===t)throw"Tried to access a none existing reactive property";return t.getValue()},set:function(t){var i=ReactiveProp._DEFINED[e];if(null===i)throw"Tried to access a none existing reactive property";i.setValue(t),i._updateBound()},enumerable:!0,configurable:!0})},e.prototype.attrib=function(e){var t=this._element[e];return void 0===t&&(t=this._element.getAttribute(e)),t},e.prototype._initEvents=function(){var e=this;this._element.addEventListener("change",function(){for(var t in e._propList)for(var i=0,n=e._propList[t];i<n.length;i++){if(n[i]._updateValue())break}ReactiveProp.update()}),this._element.addEventListener("input",function(){for(var t in e._propList)for(var i=0,n=e._propList[t];i<n.length;i++){if(n[i]._updateValue())break}ReactiveProp.update()})},e}(),reactiveElements=document.querySelectorAll("[r-reactive]");if(reactiveElements)for(var _i=0,reactiveElements_1=reactiveElements;_i<reactiveElements_1.length;_i++){var el=reactiveElements_1[_i];new ReactiveElement(el)}