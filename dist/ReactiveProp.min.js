var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)},ReactiveProp=function(){function e(t,i,n,r,o){void 0===o&&(o=""),this._element=null,this._definitionName="",this._prop="",this._reactiveName="",this._value="",this._bound=[],this._origin=null,this._element=t,this._definitionName=i,this._prop=n,this._reactiveName=r,this.setValue(o),""!=r&&(void 0===e._DEFINED[r]?e._DEFINED[r]=this:this._origin=e._DEFINED[r],e._DEFINED[r].bind(this))}return e.update=function(){for(var t in e._DEFINED){e._DEFINED[t]._updateBound()}},e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){if("r-reactive"!==this._definitionName&&null!==e){var t=this._value!=e;t&&(this._value=e,this._origin&&this._origin.setValue(this._value)),this._reflect(t)}},e.prototype._reflect=function(e){void 0===e&&(e=!0),this._isDirective()?this._handleDirective(e):e&&(void 0===this._element._element[this._prop]?this._element._element.setAttribute(this._prop,this._value):this._element._element[this._prop]=this._value)},e.prototype._isDirective=function(){return-1!==e._DIRECTIVES.indexOf(this._prop)},e.prototype._handleDirective=function(e){void 0===e&&(e=!0),"html"===this._prop&&e?this._element._element.innerHTML=this._value:"text"===this._prop&&e?this._element._element.innerText=this._value:"visible"===this._prop&&(1==this._value?this._element._element.style.display="":0==this._value&&(this._element._element.style.display="none"))},e.prototype._updateValue=function(){var e=this._element.attrib(this._prop),t=e!=this._value;return t&&this.setValue(e),t},e.prototype.bind=function(e){this._bound.push(e)},e.prototype._updateBound=function(){for(var e=0,t=this._bound;e<t.length;e++){t[e].setValue(this._value)}},e._DEFINED={},e._DIRECTIVES=["html","text","visible"],e}(),ReactiveElement=function(){function e(e){this._element=null,this._propList={};var t=null;if("string"==typeof e){if(null===(t=document.querySelector(e)))throw'Element with selector "'+e+'" does not exist'}else t=e;this._element=t,this._mapProps(),this._initEvents()}return e.prototype._mapProps=function(){var e=__assign({},this._element.attributes);e.length=Object.keys(e).length;for(var t=0,i=e;t<i.length;t++){var n=i[t],r=n.name,o=n.value;if(0==r.indexOf("r-")){var s=r.substr(2),a=this._element.getAttribute(s);null===a&&(a="");var l=new ReactiveProp(this,r,s,o,a);void 0===this._propList[o]&&(this._propList[o]=[]),this._propList[o].push(l),this._defineReactiveProp(o),this._element.attributes.removeNamedItem(r)}}},e.prototype._defineReactiveProp=function(e){Object.defineProperty(this,e,{get:function(){var t=ReactiveProp._DEFINED[e];if(null===t)throw"Tried to access a none existing reactive property";return t.getValue()},set:function(t){var i=ReactiveProp._DEFINED[e];if(null===i)throw"Tried to access a none existing reactive property";t!=i.getValue()&&(i.setValue(t),i._updateBound())},enumerable:!0,configurable:!0})},e.prototype.attrib=function(e){var t=this._element[e];return void 0===t&&(t=this._element.getAttribute(e)),t},e.prototype._initEvents=function(){var e=this;this._element.addEventListener("change",function(){for(var t in e._propList)for(var i=0,n=e._propList[t];i<n.length;i++){if(n[i]._updateValue())break}ReactiveProp.update()}),this._element.addEventListener("input",function(){for(var t in e._propList)for(var i=0,n=e._propList[t];i<n.length;i++){if(n[i]._updateValue())break}ReactiveProp.update()})},e}(),ReactiveApp=function(){function e(e){if(this._main=null,this.$data={},!e.hasOwnProperty("main"))throw"No app function provided";this._init();var t=e.main;t.call(this),this._main=t}return e.prototype._init=function(){var e=document.querySelectorAll("[r-reactive]");if(e){for(var t=0,i=e;t<i.length;t++){var n=i[t];new ReactiveElement(n)}for(var r in ReactiveProp._DEFINED){var o=ReactiveProp._DEFINED[r];this._defineReactiveProp(r,o)}}},e.prototype._defineReactiveProp=function(e,t){Object.defineProperty(this.$data,e,{get:function(){var e=t;if(null===e)throw"Tried to access a none existing reactive property";return e.getValue()},set:function(e){var i=t;if(null===i)throw"Tried to access a none existing reactive property";e!=i.getValue()&&(i.setValue(e),i._updateBound())},enumerable:!0,configurable:!0})},e}();